<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link rel="stylesheet" type="text/css" href="../css/style.css"></link>
</h:head>

<body>
	<f:metadata>
		<f:viewParam name="id" value="#{mb.livro.id}"></f:viewParam>
		<f:viewParam name="id" value="#{mbe.livro.id}" />
		<f:event listener="#{mb.checkId}" type="preRenderView"></f:event>
		<f:event listener="#{mbe.checkLivroId}" type="preRenderView"></f:event>
	</f:metadata>
	<p:panel header="#{mb.livro.nome}" id="panelLivro">

		<table cellspacing="20">
			<tr>
				<td><h:graphicImage value="/img/#{mb.livro.imagem}" width="150"></h:graphicImage>
				</td>
				<td>#{mb.livro.descricao}</td>
			</tr>
		</table>
		<p style="text-align: right;">
			"#{mb.livro.nome}" foi escrito por <a
				href="autor.jsf?id=#{mb.livro.autor.id}">#{mb.livro.autor.nome}</a>
		</p>
	</p:panel>
	<br />
	<p:panel header="Editar essa página">
		<h:form id="form1" enctype="multipart/form-data">
			<table cellspacing="20" width="100%">
				<tr>
					<td style="width: 150px"><h:outputLabel for="nomeLivro"
							value="Nome do livro"></h:outputLabel></td>
					<td><p:inputText id="nomeLivro" value="#{mbe.livro.nome}"
							required="true"></p:inputText></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="desc"
							value="Descrição do livro"></h:outputLabel></td>
					<td><p:inputTextarea id="desc" counter="display"
							maxlength="1500" counterTemplate="Restam {0} caracteres."
							autoResize="true" style="width:100%; max-width:500px"
							value="#{mbe.livro.descricao}" required="true" /> <br /> <h:outputText
							id="display" /></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="uploadCapa"
							value="Capa do livro"></h:outputLabel></td>
					<td><p:fileUpload id="uploadCapa" mode="simple"
							skinSimple="true" label="Alterar..." allowTypes="/(\.|\/)(jpg)$/"
							value="#{mbe.capaLivro}" required="false" /></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="isbn"
							value="ISBN"></h:outputLabel></td>
					<td><p:inputMask id="isbn" value="#{mbe.livro.isbn}"
							required="true" mask="999-9-99-999999-9" size="17"></p:inputMask></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="editora"
							value="Editora"></h:outputLabel></td>
					<td><p:inputText id="editora" value="#{mbe.livro.editora}"
							required="true"></p:inputText></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="selectAutor"
							value="Nome do Autor"></h:outputLabel></td>
					<td><p:selectOneMenu id="selectAutor" value="#{mbe.autor.id}"
							filter="true" required="true">
							<f:selectItems value="#{mb.autores}" var="autor"
								itemLabel="#{autor.nome}" itemValue="#{autor.id}" filter="true">
							</f:selectItems>
						</p:selectOneMenu></td>
				</tr>
			</table>
			<p:commandButton value="Editar" action="#{mbe.editarLivro}"
				ajax="false"></p:commandButton>
			<p:growl></p:growl>
		</h:form>
	</p:panel>
	<br />
	<p:button href="index.jsf" value="Voltar"></p:button>
</body>
</html>
