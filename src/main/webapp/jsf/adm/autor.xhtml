<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link rel="stylesheet" type="text/css" href="../css/style.css"></link>
</h:head>

<body>
	<f:metadata>
		<f:viewParam name="id" value="#{mbe.autor.id}"></f:viewParam>
		<f:viewParam name="id" value="#{mba.id}" />
		<f:event listener="#{mbe.checkAutorId}" type="preRenderView"></f:event>
		<f:event listener="#{mba.checkId}" type="preRenderView"></f:event>
	</f:metadata>
	<p:panel header="#{mba.autor.nome}">
		<table cellspacing="20" width="100%">
			<tr>
				<td width="150"><h:graphicImage
						value="/img/#{mba.autor.imagem}" width="150"></h:graphicImage></td>
				<td><p>#{mba.autor.descricao}</p></td>
			</tr>
		</table>
		<br />
		<p:panel header="Livros de #{mba.autor.nome}">
			<p:dataTable value="#{mba.livros}" var="livro">
				<p:column headerText="id">
					<h:outputText value="#{livro.id}"></h:outputText>
				</p:column>
				<p:column headerText="Nome">
					<a href="livro.jsf?id=#{livro.id}"><h:outputText
							value="#{livro.nome}"></h:outputText></a>
				</p:column>
			</p:dataTable>
		</p:panel>
	</p:panel>
	<br />

	<br />

	<p:panel header="Editar essa página">
		<h:form id="form1" enctype="multipart/form-data">
			<table cellspacing="20" width="100%">
				<tr>
					<td><h:outputLabel for="nomeAutor" value="Nome do Autor" /></td>
					<td><p:inputText id="nomeAutor" value="#{mbe.autor.nome}"
							required="true" /></td>
				</tr>
				<tr>
					<td><h:outputLabel for="uploadFoto" value="Foto do Autor" /></td>
					<td><p:fileUpload id="uploadFoto" mode="simple"
							skinSimple="true" label="Alterar..." allowTypes="/(\.|\/)(jpg)$/"
							value="#{mbe.fotoAutor}" required="false" /></td>
				</tr>
				<tr>
					<td style="width: 150px"><h:outputLabel for="descAutor"
							value="Descrição do Autor" /></td>
					<td><p:inputTextarea id="descAutor" counter="display"
							maxlength="1500" counterTemplate="Restam {0} caracteres."
							autoResize="true" style="width:100%; max-width:500px"
							value="#{mbe.autor.descricao}" required="true" /> <br /> <h:outputText
							id="display" /></td>
				</tr>
			</table>
			<p:commandButton value="Editar" action="#{mbe.editarAutor}"
				ajax="false"></p:commandButton>
			<p:growl></p:growl>
		</h:form>
	</p:panel>
	<br />
	<p:button href="index.jsf" value="Voltar"></p:button>
</body>
</html>
